# Email Assistant Extension 要件定義書

## 1. プロジェクト概要

### 1.1 背景と目的
Email Assistant Extensionは、Gmail向けのブラウザ拡張機能であり、ユーザーと相手との関係性に基づいてメール内容を適切に修正することを目的としています。Google Gemini APIを活用し、ビジネスシーンにおける適切なコミュニケーションをサポートします。

### 1.2 対象ユーザー
- ビジネスメールを日常的に送信するユーザー
- 様々な関係性の相手とメールでコミュニケーションを取るユーザー
- 適切な敬語や表現に悩むユーザー

## 2. 機能要件

### 2.1 コア機能
- **関係性ベースの文章調整**：相手との関係性に基づいてメール内容を適切に修正
- **Gemini API統合**：高度な自然言語処理を活用した文章調整
- **Gmail統合**：Gmail作成画面に直接統合し、シームレスな操作性を提供

### 2.2 関係性管理
- **関係性設定**：ユーザーが送信先メールアドレスと関係性を手動で設定可能
- **デフォルトカテゴリ**：以下のビジネス向け関係性カテゴリを提供
  - 上司（フォーマルで敬語）
  - 同僚（標準的なビジネス文体）
  - 部下（指導的でありながら丁寧）
  - クライアント（非常にフォーマルで丁寧）
  - ビジネスパートナー（協力的でプロフェッショナル）
  - 社外関係者（初対面）（フォーマルで慎重）
- **カスタム関係性**：ユーザーが独自の関係性カテゴリを作成・管理可能

### 2.3 ユーザーインターフェース
- **Gmailボタン統合**：Gmail作成画面に「メール調整」ボタンを追加
- **インライン表示**：修正案をメール作成エリアの下に表示
- **修正適用機能**：提案された修正を1クリックで適用可能
- **ポップアップUI**：拡張機能アイコンクリック時に簡易情報と設定へのリンクを表示
- **設定画面**：関係性とカスタムカテゴリの管理インターフェース

## 3. 技術要件

### 3.1 開発環境
- **ブラウザ拡張形式**：Chrome拡張機能（Manifest V3）
- **対象メールサービス**：Gmail

### 3.2 使用技術
- **フロントエンド**：HTML, CSS, JavaScript
- **API**：Google Gemini API
- **ストレージ**：Chrome Storage API（ユーザー設定保存用）

### 3.3 プライバシーとセキュリティ
- APIキーは拡張機能に組み込む形で提供
- メール内容はAPI呼び出し時のみ外部に送信
- ユーザーデータはローカルブラウザ内のみで保存

## 4. システム構成

### 4.1 コンポーネント構成
- **マニフェスト**：拡張機能の基本設定
- **バックグラウンドスクリプト**：API通信と処理ロジック
- **コンテンツスクリプト**：Gmail UI統合
- **ポップアップUI**：簡易操作と情報表示
- **設定画面**：詳細設定管理

### 4.2 ファイル構成
```
email-assistant-extension/
├── manifest.json
├── background.js
├── content-scripts/
│   └── gmail-integration.js
├── popup/
│   ├── popup.html
│   └── popup.js
├── options/
│   ├── options.html
│   └── options.js
├── styles/
│   ├── content.css
│   └── options.css
└── icons/
    ├── icon16.png
    ├── icon48.png
    └── icon128.png
```

## 5. ユーザーフロー

1. ユーザーが設定画面で相手のメールアドレスと関係性を設定
2. Gmailでメール作成時に「メール調整」ボタンをクリック
3. システムが相手のメールアドレスから関係性を特定
4. メール内容をGemini APIに送信して修正案を取得
5. 修正案をインラインで表示
6. ユーザーが修正を適用または無視

## 6. 将来的な拡張可能性

- 複数の修正案の提示
- 過去のメールから関係性を自動推定する機能
- 特定業界向けのテンプレート提供
- 複数言語サポート

## 7. 制約事項と注意点

- Gemini APIの使用量制限に注意
- Gmailのインターフェース変更への対応
- ブラウザ拡張機能のセキュリティポリシーへの準拠

---

本要件定義書は初期バージョンであり、開発過程で要件の詳細化や変更が行われる可能性があります。